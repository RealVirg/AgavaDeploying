{% extends "base_account.html" %}
{% block css %}
{% load static %}
<link rel="stylesheet" href="{% static 'mainpage/css/header.css' %}">
{% endblock %}
{% block header %}
    <li class="menu__group"><a class="menu__link r-link text-underlined" href="{{ prj.get_absolute_url }}">Back</a></li>
{% endblock %}
{% block content %}
<div class="info-device">
    {{ device.name_device }} , {{ device.type_device }}
    <ul class="list-param">
        {% for param in params %}
        <li class="param">
            {{ param }}
        </li>
        {% endfor %}
    </ul>
</div>
{% if device.type_device == "modbus-tcp" %}
<form class="create-modbus-reg-form" method="post" onchange="update()">
        {{ form.as_p }}
        {% csrf_token %}
        {{ form_modbus.as_p }}
        {% csrf_token %}
        <p><input type="submit" value="modbus" name="modbus"></p>
</form>
<form class="del-par-form" method="post">
        {{ form_del.as_p }}
        {% csrf_token %}
        <p><input type="submit" value="del" name="del"></p>
</form>
<script type="text/javascript">
  function update() {
  var select = document.getElementById("id_read_or_write");
  var valueSelected = select.options[select.selectedIndex].value
  document.getElementById('id_number_function_read').placeholder = "Номер функции чтения";
  document.getElementById('id_address_read').placeholder = "Адрес";
  document.getElementById('id_number_function_write').placeholder = "Номер функции записи";
  document.getElementById('id_address_write').placeholder = "Адрес";
  if (valueSelected == 'write') {
      document.getElementById('id_number_function_read').hidden = true;
      document.getElementById('id_address_read').hidden = true;
      document.getElementById('id_number_function_write').hidden = false;
      document.getElementById('id_address_write').hidden = false;
  } else {
      document.getElementById('id_number_function_write').hidden = true;
      document.getElementById('id_address_write').hidden = true;
      document.getElementById('id_number_function_read').hidden = false;
     document.getElementById('id_address_read').hidden = false;
  }}
  update();
</script>
{% endif %}
{% endblock %}